**对象在JVM中的初探**

        简单的剖析一个对象（不包括，数组，class对象）,当虚拟机遇到一条new指令时，首先到常量池中获取该类的符号引用，并且通过符号引用
        判断该类是否被加载过。
        检查通过后，虚拟机将为对象分配内存，分配内存的方式是根据GC的回收算法来实现的。
        一般存在两种：
            （1）在为对新对象分配内存时，内存空间上是规整的，使用过的内存，与未使用的内存都有序存放。那么二者的中间存在一个指示器，已分配的内存把指正指向未分配的那一方想通的距离.
            这种方式称为指针碰撞。
            （2）内存空见在不规整的情况下，未分配的空间与已分配的空间，混杂在一起，这个需要维护一张索引记录表，记录可用的内存。这种方式称为，空闲列表法。
            
        
        内存的分配的并发问题：
            虚拟机创建对象的频率是很高的，如何处理对象的内存分配的并发问题至关重要。
                两种处理方案:
                    (1)：采用异步分配，搭配CAS失败重试的机制保证分配内存的原子性。
                   （2）：采用TLAB(线程创建时在堆内存中都会分配一个私有的内存区域)，只有TLAB内存耗尽才会像Eden空间申请内存，这时才会同步锁定新分配的TLAB空间
                   是否启用TLAB机制，通过参数-XX:+/-UseTLAB参数来设定。接下来虚拟机会根据对象头对对象进行进一步的设置。
                   
**对象的内存定位布局**
        
        对象在内存布局中：主要分为三部分。
        
            一、对象头：对象头分为两部分
                    
                    (1)：第一部分：主要存储对象自身运行时的数据，GC年龄信息，锁状态标志，hashCode,等等。
                    
                    (2)：第二部分:对象指向类自身的元数据指针，虚拟机通过这个指针来确定这个对象属于哪个类的实例信息。
            
            二、实例数据部分：这里是真正存放对象数据信息的地方，存放对象的字段内容信息，遵循一个原则，相同宽度的字段总是会被分配到一起。
            
            三、对齐填充部分：起到对对象内存地址的占位符的作用，因为虚拟机要求对象的地址必须为8个字节以上。
                   
        对象访问定位:
                对象访问定位原理:
                    虚拟机通过虚拟机栈中运行的当前线程的栈桢中的局部变量表中引用类型去定位堆内存中实例池中的对象。
                    
                    两种链接解决方案:
                        一、使用句柄池，局部变量中存放的引用类型保存的是对象的句柄。句柄的优点：发生一次GC之后，对象的分布在物理空间上
                        会改变的，这时候局部变量保存的句柄不变，变的只是句柄池中的对象实例数据的指正。
                        
                        二、指针：局部变量中引用类型保存的是对象的指针，优点是速度快。它节省了一次指针定位的开销。
                        
                    二者的适用场景不同需求也不同。